{"version":3,"sources":["event.js","barrage.js","basicComponent.js","fish.js","bubble.js","App.js","serviceWorker.js","index.js"],"names":["src_event","EventEmitter","Barrage","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","top","moveTime","emitter","removeListener","eventEmitter","_this2","addListener","data","bulletText","bulletArr","text","len","length","i","item","Math","floor","random","ceil","push","bullets","map","console","log","_react_16_8_6_react_default","a","createElement","key","className","style","animationDuration","setState","setBullets","Component","Modal","setAppElement","defaultStyles","overlay","backgroundColor","zIndex","customStyles","content","left","right","bottom","marginRight","transform","background","border","textAlign","basicComponent","openDialog","actionDisplay","baseInfo","missionAndAward","closeDialog","bind","assertThisInitialized","hasFeed","fetch","then","response","json","res","intimacyCount","setTimeout","intimacyClass","_this3","mockData","bubbleData","medalText","feedNum","missionCount","awardCount","shopName","userPic","ruleHTML","shopHTML","bgImg","grassImg","pondImg","pondTitle","pondDesc","shopUp","bgAudio","feedAudio","emit","_this4","title","html","_this5","_this$state$baseInfo","_feedAudio","_this$state","concat","src_barrage","src","onClick","marginTop","dangerouslySetInnerHTML","__html","lib_default","isOpen","display","closeAction","feedClick","actionClick","autoPlay","loop","React","Fish","eating","fishes","fishName","fishEatNum","alt","bubbleArr","canClick","fly","index","bubbles","duration","clickBubble","App","basicComponent_basicComponent","src_fish","src_bubble","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b9d499fe.chunk.js","sourcesContent":["import { EventEmitter } from 'events';\nexport default new EventEmitter();","import React, { Component } from 'react';\nimport './barrage.scss';\nimport emitter from './event';\n\nclass Barrage extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            top : 10,//默认弹幕出现位置参数\n            moveTime : 10,//默认弹幕移动速度参数\n        };\n      }\n\n    componentWillUnmount() {\n        emitter.removeListener(this.eventEmitter);\n    }\n\n    componentDidMount() {\n\n        this.eventEmitter = emitter.addListener('receiveData', data => {\n            const {bulletText} = data\n            let setBullets = () => {\n                let bulletArr = [],\n                    text = bulletText,\n                    len = bulletText.length,\n                    moveTime = this.state.moveTime,\n                    top = this.state.top;\n    \n                for (let i = 0; i < len; i++) {\n                    let item = {\n                        text:text[i],\n                        top: Math.floor(Math.random()*(top + 30)) + top + \"px\",\n                        moveTime: Math.ceil(Math.random() * moveTime) + 5 +'s'\n                    }\n                    bulletArr.push(item);\n                }\n    \n                let bullets = bulletArr.map((item, i)=> {\n                    console.log(item)\n                    return (\n                        <div key={i} className=\"bullet\" style={{\"top\" : item.top, \"animationDuration\": item.moveTime }} >\n                            {item.text}\n                        </div>\n                        )\n                    }\n                )\n    \n                this.setState({ bullets })\n            }\n            setBullets()\n        });\n    }\n    \n\n    render(){\n        return (\n            <div className=\"barrage-wrap\">\n                {this.state.bullets || ''}\n            </div>\n        )\n    }\n}\n\nexport default Barrage","import React from 'react';\nimport Modal from 'react-modal';\nimport Barrage from \"./barrage\";\nimport 'animate.css';\nimport emitter from './event';\n\nconst mainUrl = 'https://www.tianqiapi.com/api/?version=v1'  //主接口，各种基础信息\nconst subUrl = 'https://www.tianqiapi.com/api/?version=v1'  //副接口，负责渲染任务和兑换奖品信息\nconst intimacyUrl = 'https://www.tianqiapi.com/api/?version=v1'  //副接口，负责渲染任务和兑换奖品信息\n\nModal.setAppElement('#root');\nModal.defaultStyles.overlay.backgroundColor = 'rgba(0,0,0,.5)';\nModal.defaultStyles.overlay.zIndex = 10;\n\nconst customStyles = {\n  content : {\n    top                   : '40%',\n    left                  : '50%',\n    right                 : 'auto',\n    bottom                : 'auto',\n    marginRight           : '-50%',\n    transform             : 'translate(-50%, -50%)',\n    background:'transparent',\n    border:\"none\",\n    textAlign:'center'\n  }\n};\n\nexport default class basicComponent extends React.Component {\n  constructor(){\n    super();\n    this.state = {\n      openDialog: false,\n      actionDisplay:'none',\n      baseInfo:{},\n      missionAndAward:{}\n    };\n    this.closeDialog = this.closeDialog.bind(this);\n    this.openDialog = this.openDialog.bind(this);\n  }\n  \n  componentDidMount(){\n  \n    this.eventEmitter = emitter.addListener('hasFeedFish', () => {\n      let {baseInfo} = this.state \n      baseInfo.hasFeed = false\n      this.setState({ baseInfo })\n    })\n\n    this.eventEmitter = emitter.addListener('clickBubble', data => {\n      fetch(intimacyUrl).then(response=> {   //分数传入接口\n        return response.json();\n      }).then(res=>{\n        let {baseInfo} = this.state \n        baseInfo.intimacyCount = baseInfo.intimacyCount+data.text  //更新亲密度\n\n        setTimeout(() => {\n          this.setState({intimacyClass:true})\n          setTimeout(() => {\n            this.setState({intimacyClass:false,baseInfo})\n          }, 1000);\n        }, 700);\n      })\n    });\n  }\n\n  componentWillMount(){\n    fetch(mainUrl)  //填入主接口\n    .then(response=> {\n      return response.json();\n    })\n    .then(data => {\n      const mockData={\n        bulletText:[                //弹幕的内容，数组格式\n          '弹幕文本弹幕文本😄~hello', \n          '弹幕文本弹幕文本😄~world', \n          '弹幕文本弹幕文本😄~fighting', \n        ],\n        bubbleData:[3, 10 ,30],       //气泡的内容，数组格式\n        baseInfo:{\n          medalText:\"银粉\",          //级别\n          intimacyCount: 23456,       //亲密度\n          feedNum: 10,         //喂鱼次数限制\n          hasFeed: false,     //喂鱼动作完成后，才可进行下一次喂鱼\n          missionCount: 3,    //任务数量\n          awardCount: 2,       //奖品数量\n          shopName:'哈哈哈官方旗舰店',  //店铺名称\n          userPic:'https://gw.alicdn.com/tfs/TB1dQokcbj1gK0jSZFOXXc7GpXa-500-500.jpg', //用户头像\n          ruleHTML:`游戏规则写在这里游戏规则写在这里游戏 \n          游戏规则写在这里游戏规则写在这里游戏\n          <ul>\n            <li>规则1</li>\n            <p>游戏规则写在这里游戏规则写在这里游戏</p>\n            <li>规则1</li>\n            <p>游戏规则写在这里游戏规则写在这里游戏</p>\n            <li>规则1</li>\n            <p>游戏规则写在这里游戏规则写在这里游戏</p>\n          </ul>`,    //游戏规则用html传入\n          shopHTML:`<span>店铺精选用html传入</span>`,\n          bgImg:'https://img.alicdn.com/tfs/TB1qGGacAL0gK0jSZFtXXXQCXXa-750-1223.png',//背景图\n          grassImg:'https://gw.alicdn.com/tfs/TB1kFuacEH1gK0jSZSyXXXtlpXa-750-1223.png',//草地\n          pondImg:'https://img.alicdn.com/tfs/TB1qGGacAL0gK0jSZFtXXXQCXXa-750-1223.png',\n          pondTitle:'鱼塘',\n          pondDesc:'鱼塘描述',\n          shopUp:\"20\",   //店铺上移高度\n          bgAudio:'https://projecttemp.oss-cn-hangzhou.aliyuncs.com/%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90.mp3',\n          feedAudio:\"https://projecttemp.oss-cn-hangzhou.aliyuncs.com/%E6%B0%B4%E5%A3%B02.mp3\"\n        }\n      }\n\n      emitter.emit('receiveData',mockData);\n      const baseInfo = mockData.baseInfo;\n      this.setState({ baseInfo })\n    });\n  }\n\n  closeDialog(){\n    this.setState({\n      openDialog:false\n    })\n  }\n\n  openDialog(){\n    this.setState({\n      openDialog:true\n    })\n  }\n\n  actionClick(){\n    fetch(subUrl)  //任务和兑换奖品是一个接口\n    .then(response=> {\n      return response.json();\n    }).then(data=>{\n      const missionAndAward = {\n        title:'任务',\n        html:'<span>动态传入的任务，或者奖品的html</span>'\n      }\n      \n      this.setState({\n        actionDisplay:'',\n        missionAndAward\n      })\n    })\n    \n  }\n  closeAction(){\n    this.setState({\n      actionDisplay:'none'\n    })\n  }\n  feedClick(){\n    const { baseInfo : {feedNum, hasFeed,feedAudio} } = this.state\n    if(feedNum > 0){\n      if(hasFeed) return\n      emitter.emit('fishEat');\n      let { baseInfo } = this.state \n      baseInfo.hasFeed = true\n      baseInfo.feedNum = feedNum - 1\n      baseInfo._feedAudio = feedAudio;\n      this.setState({ baseInfo })\n      setTimeout(() => {\n        baseInfo._feedAudio='';\n        this.setState({ baseInfo })\n      }, 2500);\n    }else{\n      //没有喂鱼次数了！\n    }\n  }\n\n  render() {\n    const {baseInfo,missionAndAward,intimacyClass} = this.state;\n    \n    return (\n      <div>\n        \n        <div className=\"App-fish\" style={{\n            background:`url(${baseInfo.bgImg}) center / cover`,\n          }}>\n          <Barrage/>\n          <div className=\"shop-name\">\n            {baseInfo.shopName}\n          </div>\n\n          <div className=\"info-wrap\">\n            <img className=\"avater\" src={baseInfo.userPic} ></img>\n            <div className=\"medal\">\n              <span className=\"medal-text\">\n                {baseInfo.medalText}\n              </span>\n            </div>\n            <div className=\"intimacy-wrap\">\n              <img\n                src=\"https://b2.bmp.ovh/imgs/2019/08/8766db125eff1691.png\"\n                className={intimacyClass?'animated  heartBeat intimacy-icon':'intimacy-icon'}></img>\n              <div className=\"intimacy-count\">\n                {baseInfo.intimacyCount}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"rule\">\n            <div className=\"rule-text\" onClick={this.openDialog}>规则说明</div>\n          </div>\n        </div>\n        \n\n        <div className=\"bg-wrap\">\n          <div className=\"rule\">\n              <div className=\"rule-text\" onClick={this.openDialog}>规则说明</div>\n          </div>\n        </div>\n\n        <div className=\"App-shop\" style={baseInfo.shopUp?{\n          marginTop:`-${baseInfo.shopUp}px`\n        }:{}}>\n          <div className=\"title\">店铺精选</div>\n          <div className=\"body\">\n            <div dangerouslySetInnerHTML={{__html: baseInfo.shopHTML}} />\n          </div>\n        </div>\n\n        <Modal isOpen={this.state.openDialog} style={customStyles} >\n          <div className=\"dialog animated  bounceIn\">\n            <div dangerouslySetInnerHTML={{__html: baseInfo.ruleHTML}} />\n          </div>\n          <div className=\"dialog-close\" onClick={this.closeDialog}></div>\n        </Modal>\n\n        <div className=\"custom-dialog animated  bounceInUp\" style={{display:this.state.actionDisplay}}>\n          <div className=\"title\" onClick={this.closeAction.bind(this)}>{missionAndAward.title}</div>\n          <div className=\"body\">\n            <div dangerouslySetInnerHTML={{__html: missionAndAward.html}} />\n          </div>\n        </div>\n\n        <div className=\"bg-wrap\" style={baseInfo.shopUp?{\n          marginTop:`-${baseInfo.shopUp}px`\n        }:{}}>\n          <div className=\"fishpond-info\">\n            <img className=\"pondimg\" src={baseInfo.pondImg}></img>\n            <div className=\"title\">{baseInfo.pondTitle}</div>\n            <div className=\"desc\">{baseInfo.pondDesc}</div>\n          </div>\n    \n          <div className=\"actions\">\n              <div className=\"feed\" onClick={this.feedClick.bind(this,'feed')}>\n                <span className=\"count\">{baseInfo.feedNum}</span>\n              </div>\n              <div className=\"mission\" onClick={this.actionClick.bind(this,'mission')}>\n                <span className=\"count\">{baseInfo.missionCount}</span>\n              </div>\n              <div className=\"award\" onClick={this.actionClick.bind(this,'award')}>\n                <span className=\"count\">{baseInfo.awardCount}</span>\n              </div>\n          </div>\n        </div>\n        <div className=\"grass-wrap\">\n          <div className=\"grass\" style={{\n            background:`url(${baseInfo.grassImg}) center/cover`\n          }}></div>\n        </div>\n        <audio src={baseInfo.bgAudio} autoPlay loop></audio>\n        <audio src={baseInfo._feedAudio} autoPlay></audio>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport './fish.scss';\nimport emitter from './event';\n\nclass Fish extends Component{\n    constructor(props) {\n        super(props);\n        this.state = { eating : false };\n      }\n    \n    componentDidMount() {\n        //初始化游动鱼\n        let eating = this.state.eating || false,\n            array = [1,2,3,4,5]\n        let fishes = array.map((item,i)=>{\n            let fishName = 'fish' + item\n            return (\n                <div key={i} className={fishName}></div>\n            )\n        }) \n        this.setState({ fishes })\n\n        //传值吃鱼饵，切换动画类\n        this.eventEmitter = emitter.addListener('fishEat', () => {\n            if(!eating){\n                let fishEatNum =  \"fish-eat\" + (Math.floor(Math.random() * 5) + 1)\n                this.setState({ eating: true , fishEatNum })\n                setTimeout(() => {\n                    emitter.emit('hasFeedFish');\n                    this.setState({ eating: false })\n                }, 2500);\n            }\n        });\n    }\n\n    componentWillUnmount() {\n        emitter.removeListener(this.eventEmitter);\n    }\n    \n    render(){\n        const { eating, fishes, fishEatNum } = this.state\n\n        return(\n            <div className=\"fishes-wrap\" >\n                <div className=\"bg-bubble\"></div>\n                <div className=\"turtle\"></div>\n                <div className=\"preloader-fish-eat\"></div>\n                { fishes }\n                {  \n                    eating \n                    ?\n                        <div className={ fishEatNum }></div>\n                    :   \"\"\n                }\n                <img src={\"\"} alt=\"\" />\n            </div>\n        )\n    }\n}\n\nexport default Fish\n","import React, { Component } from 'react';\nimport './bubble.scss';\nimport emitter from './event';\n\nclass Barrage extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            bubbleArr:[],\n            canClick: true\n        };\n    }\n    componentWillUnmount() {\n        emitter.removeListener(this.eventEmitter);\n    }\n\n    componentDidMount() {\n\n        this.eventEmitter = emitter.addListener('receiveData', data => {\n            \n            const {bubbleData} = data;\n            const {bubbleArr} = this.state;\n\n            for (let i = 0; i < bubbleData.length; i++) {\n                let item = {\n                    text:bubbleData[i],\n                    top: (Math.floor(Math.random()*500) + 440)/750*100 + \"vw\",\n                    left: Math.floor(Math.random()*80) + \"vw\",\n                    fly:false\n                }\n                bubbleArr.push(item);\n            }\n            this.setState(bubbleArr)\n        });\n    }\n\n    clickBubble(index){\n        const {bubbleArr, canClick} = this.state;\n        if (!canClick) return\n        bubbleArr[index]['fly'] = true\n        this.setState({bubbleArr,canClick: false});\n        emitter.emit('clickBubble',bubbleArr[index]);\n        setTimeout(() => {\n            this.setState({canClick: true});\n        }, 1000);\n    }\n\n\n    render(){\n        const {bubbleArr} = this.state;\n\n        let bubbles = bubbleArr.map((item, i)=> {\n             let duration = Math.floor(Math.random()* 7)+ 3 + 's'\n            return (\n                <div className=\"animated pulse slower infinite\" style={{\n                    \"animationDuration\" : duration\n                }} key={i}>\n                    <div  className={item.fly?\"bubble fly-to-intimacy\":\"bubble\"} style={{\n                        \"top\":item.top,\n                        \"left\":item.left\n                    }} onClick={this.clickBubble.bind(this,i)}>+{item.text}</div>\n                </div>\n                )\n            }\n        )\n        return (\n            <div className=\"bubble-wrap\">\n                {bubbles || ''}\n            </div>\n        )\n    }\n}\n\nexport default Barrage","import React from 'react';\nimport BasicComponent from './basicComponent';\nimport Fish from \"./fish\";\nimport Bubble from \"./bubble\";\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BasicComponent/>\n      <Fish />\n      <Bubble/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}